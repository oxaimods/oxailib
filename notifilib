--[[
	NotificationLib
	Simple stacking notification library for Roblox
	
	Usage:
	local NotifiLib = require(path.to.NotificationLib)
	NotifiLib.Notify("Injected!", 6)
]]

local NotificationLib = {}

-- Services
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- ===== ScreenGui =====
local screenGui = playerGui:FindFirstChild("NotificationGui")
if not screenGui then
	screenGui = Instance.new("ScreenGui")
	screenGui.Name = "NotificationGui"
	screenGui.ResetOnSpawn = false
	screenGui.Parent = playerGui
end

-- ===== DEFAULT SETTINGS =====
NotificationLib.Settings = {
	Width = 220,
	Height = 75,
	Spacing = 10,
	BaseYOffset = -120,
	SlideTime = 0.4,
	Font = Enum.Font.GothamBold,
	TextSize = 20,
	TextColor = Color3.fromRGB(0, 255, 140),
	BackgroundColor = Color3.fromRGB(35, 35, 35),
	CornerRadius = 10,
}

local ACTIVE_NOTIFS = {}

-- ===== INTERNAL: Update Stack =====
local function updateStack()
	for i, frame in ipairs(ACTIVE_NOTIFS) do
		local targetY =
			NotificationLib.Settings.BaseYOffset
			- ((i - 1) * (NotificationLib.Settings.Height + NotificationLib.Settings.Spacing))

		TweenService:Create(
			frame,
			TweenInfo.new(NotificationLib.Settings.SlideTime, Enum.EasingStyle.Quint, Enum.EasingDirection.Out),
			{ Position = UDim2.new(0, 15, 1, targetY) }
		):Play()
	end
end

-- ===== PUBLIC API =====
function NotificationLib.Notify(text, duration)
	duration = duration or 3

	local notif = Instance.new("Frame")
	notif.Size = UDim2.new(0, NotificationLib.Settings.Width, 0, NotificationLib.Settings.Height)
	notif.Position = UDim2.new(0, -NotificationLib.Settings.Width - 20, 1, NotificationLib.Settings.BaseYOffset)
	notif.BackgroundColor3 = NotificationLib.Settings.BackgroundColor
	notif.BorderSizePixel = 0
	notif.Parent = screenGui

	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(0, NotificationLib.Settings.CornerRadius)
	corner.Parent = notif

	local label1 = Instance.new("TextLabel")
	label1.Size = UDim2.new(1, -10, 1, -10)
	label1.Position = UDim2.new(0, 5, 0, 0)
	labe11.BackgroundTransparency = 1
	label1.TextWrapped = true
	label1.Text = "Oxai-Client"
	label1.Font = NotificationLib.Settings.Font
	label1.TextSize = NotificationLib.Settings.TextSize
	label1.TextColor3 = NotificationLib.Settings.TextColor
	label1.TextXAlignment = Enum.TextXAlignment.Center
	label1.TextYAlignment = Enum.TextYAlignment.Center
	label1.Parent = notif

	local label = Instance.new("TextLabel")
	label.Size = UDim2.new(1, -10, 1, -10)
	label.Position = UDim2.new(0, 5, 0, 5)
	label.BackgroundTransparency = 1
	label.TextWrapped = true
	label.Text = tostring(text)
	label.Font = NotificationLib.Settings.Font
	label.TextSize = NotificationLib.Settings.TextSize
	label.TextColor3 = NotificationLib.Settings.TextColor
	label.TextXAlignment = Enum.TextXAlignment.Center
	label.TextYAlignment = Enum.TextYAlignment.Center
	label.Parent = notif

	table.insert(ACTIVE_NOTIFS, notif)
	updateStack()

	task.spawn(function()
		task.wait(duration)

		local index = table.find(ACTIVE_NOTIFS, notif)
		if index then
			table.remove(ACTIVE_NOTIFS, index)
		end

		TweenService:Create(
			notif,
			TweenInfo.new(NotificationLib.Settings.SlideTime, Enum.EasingStyle.Quint, Enum.EasingDirection.In),
			{ Position = UDim2.new(0, -NotificationLib.Settings.Width - 20, notif.Position.Y.Scale, notif.Position.Y.Offset) }
		):Play()

		task.wait(NotificationLib.Settings.SlideTime)
		notif:Destroy()
		updateStack()
	end)
end

return NotificationLib
